{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/prabe/Desktop/credit_card_fraud_detection/pages/index.tsx"],"sourcesContent":["import { useState } from \"react\";\r\nimport Head from \"next/head\";\r\n\r\nconst FEATURE_NAMES = [\r\n  \"Time\", \"V1\", \"V2\", \"V3\", \"V4\", \"V5\", \"V6\", \"V7\", \"V8\", \"V9\", \"V10\",\r\n  \"V11\", \"V12\", \"V13\", \"V14\", \"V15\", \"V16\", \"V17\", \"V18\", \"V19\", \"V20\",\r\n  \"V21\", \"V22\", \"V23\", \"V24\", \"V25\", \"V26\", \"V27\", \"V28\", \"Amount\"\r\n];\r\n\r\nexport default function Home() {\r\n  const [features, setFeatures] = useState<(number | string)[]>(Array(FEATURE_NAMES.length).fill(\"\"));\r\n  const [dateTime, setDateTime] = useState<string>(\"\");\r\n  const [prediction, setPrediction] = useState<number | null>(null);\r\n  const [reasoning, setReasoning] = useState<string>(\"\");\r\n  const [loadingPrediction, setLoadingPrediction] = useState(false);\r\n  const [loadingReasoning, setLoadingReasoning] = useState(false);\r\n\r\n  const handleChange = (index: number, value: string) => {\r\n    const newFeatures = [...features];\r\n    newFeatures[index] = value;\r\n    setFeatures(newFeatures);\r\n  };\r\n\r\n  const handleTimeChange = (value: string) => {\r\n    const newFeatures = [...features];\r\n    newFeatures[0] = value;\r\n    setFeatures(newFeatures);\r\n  };\r\n\r\n  const handlePredictOnly = async () => {\r\n    setLoadingPrediction(true);\r\n    setPrediction(null);\r\n    setReasoning(\"\");\r\n    try {\r\n      const sanitizedFeatures = features.map(f => parseFloat(f.toString()) || 0);\r\n      const res = await fetch(\"/api/predict\", {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({ features: sanitizedFeatures }),\r\n      });\r\n      const data = await res.json();\r\n      if (data.error) {\r\n        alert(\"Prediction Error: \" + data.error);\r\n        return;\r\n      }\r\n      setPrediction(data.prediction);\r\n    } catch (err) {\r\n      console.error(err);\r\n      alert(\"Failed to connect to the prediction server.\");\r\n    } finally {\r\n      setLoadingPrediction(false);\r\n    }\r\n  };\r\n\r\n  const handleGetReasoning = async () => {\r\n    if (prediction === null) {\r\n      alert(\"Please predict fraud first!\");\r\n      return;\r\n    }\r\n    setLoadingReasoning(true);\r\n    try {\r\n      const sanitizedFeatures = features.map(f => parseFloat(f.toString()) || 0);\r\n      const res = await fetch(\"/api/predict\", {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({ features: sanitizedFeatures }),\r\n      });\r\n      const data = await res.json();\r\n      setReasoning(data.reasoning);\r\n    } catch (err) {\r\n      console.error(err);\r\n      setReasoning(\"AI reasoning could not be generated.\");\r\n    } finally {\r\n      setLoadingReasoning(false);\r\n    }\r\n  };\r\n\r\n  const isFraud = prediction === 1;\r\n  const predictionText = prediction !== null ? (isFraud ? \"Fraud Detected\" : \"Transaction Safe\") : \"\";\r\n\r\n  return (\r\n    <>\r\n      <Head>\r\n        <title>Credit Card Fraud Detection | AI-Powered Security</title>\r\n        <meta name=\"description\" content=\"Advanced credit card fraud detection powered by Machine Learning and Gemini AI\" />\r\n      </Head>\r\n\r\n      <div className=\"container\">\r\n        <header className=\"header\">\r\n          <img src=\"/assets/credit-fraud.png\" alt=\"Fraud Detection\" className=\"logo-image\" />\r\n          <h1 className=\"main-title\">Credit Card Fraud Detection</h1>\r\n          <h2 className=\"subtitle\">Powered by Machine Learning & Gemini AI</h2>\r\n        </header>\r\n\r\n        <div className=\"main-content\">\r\n          <div className=\"input-section\">\r\n            <h3 className=\"section-title\">Transaction Details</h3>\r\n\r\n            {/* Time and Amount Fields */}\r\n            <div className=\"primary-fields\">\r\n              <div className=\"input-group\">\r\n                <div className=\"input-group\">\r\n                  <label className=\"input-label\">‚è≥ Time (Seconds since first transaction)</label>\r\n                  <input\r\n                    type=\"number\"\r\n                    step=\"any\"\r\n                    className=\"input-field\"\r\n                    value={features[0]}\r\n                    onChange={(e) => handleTimeChange(e.target.value)}\r\n                    placeholder=\"e.g. 406.0\"\r\n                  />\r\n                </div>\r\n              </div>\r\n              <div className=\"input-group\">\r\n                <label className=\"input-label\">üí∞ Amount</label>\r\n                <input\r\n                  type=\"number\"\r\n                  step=\"any\"\r\n                  className=\"input-field\"\r\n                  value={features[29]}\r\n                  onChange={(e) => handleChange(29, e.target.value)}\r\n                  placeholder=\"Transaction amount\"\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            {/* V1-V28 Features Box */}\r\n            <div className=\"features-box\">\r\n              <h4 className=\"features-box-title\">PCA Features (V1 - V28)</h4>\r\n              <div className=\"features-grid\">\r\n                {FEATURE_NAMES.slice(1, 29).map((name, index) => (\r\n                  <div key={index + 1} className=\"input-group\">\r\n                    <label className=\"input-label\">{name}</label>\r\n                    <input\r\n                      type=\"number\"\r\n                      step=\"any\"\r\n                      className=\"input-field\"\r\n                      value={features[index + 1]}\r\n                      onChange={(e) => handleChange(index + 1, e.target.value)}\r\n                    />\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n\r\n            {/* Action Buttons */}\r\n            <div className=\"button-group\">\r\n              <button\r\n                className=\"predict-button primary\"\r\n                onClick={handlePredictOnly}\r\n                disabled={loadingPrediction}\r\n              >\r\n                {loadingPrediction ? \"Analyzing...\" : \" Predict Fraud\"}\r\n              </button>\r\n              <button\r\n                className={`predict-button ${isFraud ? 'danger' : 'secondary'}`}\r\n                onClick={handleGetReasoning}\r\n                disabled={loadingReasoning || prediction === null}\r\n              >\r\n                {loadingReasoning ? \"Generating...\" : \" Get Gemini Reasoning\"}\r\n              </button>\r\n            </div>\r\n          </div>\r\n\r\n          {(prediction !== null || reasoning) && (\r\n            <div className=\"results-section\">\r\n              {prediction !== null && (\r\n                <div className={`modern-result-card ${isFraud ? 'fraud-detected' : 'safe-transaction'}`}>\r\n                  <div className=\"result-header\">\r\n                    <div className={`status-badge ${isFraud ? 'badge-danger' : 'badge-success'}`}>\r\n                      <span className=\"badge-icon\">{isFraud ? 'üö®' : 'üõ°Ô∏è'}</span>\r\n                      <span className=\"badge-text\">{isFraud ? 'FRAUD ALERT' : 'VERIFIED SAFE'}</span>\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div className=\"result-body\">\r\n                    <div className=\"prediction-display\">\r\n                      <div className=\"prediction-icon-large\">\r\n                        {isFraud ? '‚ö†Ô∏è' : '‚úÖ'}\r\n                      </div>\r\n                      <div className=\"prediction-content\">\r\n                        <h4 className=\"prediction-title\">{predictionText}</h4>\r\n                        <p className=\"prediction-subtitle\">\r\n                          {isFraud\r\n                            ? 'This transaction shows suspicious patterns'\r\n                            : 'This transaction appears legitimate'}\r\n                        </p>\r\n                      </div>\r\n                    </div>\r\n\r\n                    <div className=\"result-stats\">\r\n                      <div className=\"stat-item\">\r\n                        <div className=\"stat-label\">Risk Level</div>\r\n                        <div className={`stat-value ${isFraud ? 'high-risk' : 'low-risk'}`}>\r\n                          {isFraud ? 'HIGH' : 'LOW'}\r\n                        </div>\r\n                      </div>\r\n                      <div className=\"stat-item\">\r\n                        <div className=\"stat-label\">Confidence</div>\r\n                        <div className=\"stat-value\">\r\n                          {isFraud ? '95%' : '98%'}\r\n                        </div>\r\n                      </div>\r\n                      <div className=\"stat-item\">\r\n                        <div className=\"stat-label\">Action</div>\r\n                        <div className={`stat-value ${isFraud ? 'action-required' : 'action-approve'}`}>\r\n                          {isFraud ? 'BLOCK' : 'APPROVE'}\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              )}\r\n\r\n              {reasoning && (\r\n                <div className=\"modern-reasoning-card\">\r\n                  <div className=\"reasoning-header\">\r\n                    <div className=\"ai-header-badge\">\r\n                      <span className=\"sparkle\">‚ú®</span>\r\n                      <span className=\"ai-text\">Gemini AI Analysis</span>\r\n                      <span className=\"sparkle\">‚ú®</span>\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div className=\"reasoning-body\">\r\n                    <div className=\"reasoning-icon\">ü§ñ</div>\r\n                    <div className=\"reasoning-content\">\r\n                      <h4 className=\"reasoning-title\">Detailed Analysis</h4>\r\n                      <p className=\"reasoning-text\">{reasoning}</p>\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div className=\"reasoning-footer\">\r\n                    <span className=\"footer-text\">Made by Prabesh Sapkota</span>\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}